---
import type { Knob } from "@types"

type Props = Pick<Knob, "size" | "colors">

const {
  size,
  colors = {
    primary: "#000",
    secondary: "#8a8a8a",
  },
} = Astro.props

const pixelSize = `${size}px`
---

<div class="gradient-background">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width={size}
    height={size}
    viewBox="0 0 64 64"
  >
    <defs>
      <mask id="cut-off-rect">
        <rect x={0} y={0} height={24} width={64} fill="#fff"></rect>
      </mask>
    </defs>
    <g fill="none">
      <circle
        cx="32"
        cy="32"
        r="32"
        fill={colors.secondary}
        mask="url(#cut-off-rect)"></circle>
      <circle r="5" cx="31" cy="12" fill={colors.primary}></circle>
    </g>
  </svg>
</div>

<style
  define:vars={{
    size: pixelSize,
    primaryColor: colors.primary,
    secondaryColor: colors.secondary,
  }}
>
  .gradient-background {
    z-index: 0;
    position: relative;
    width: var(--size);
    height: var(--size);

    &:before {
      position: absolute;
      content: "";
      width: calc(var(--size) - 2px);
      height: calc(var(--size) - 2px);
      top: 1px;
      left: 1px;
      background: conic-gradient(
        from 120deg,
        var(--secondaryColor),
        var(--primaryColor),
        var(--primaryColor),
        var(--secondaryColor),
        var(--primaryColor),
        var(--primaryColor),
        var(--secondaryColor)
      );
      border-radius: 50%;
      z-index: -1;
    }
  }
</style>
